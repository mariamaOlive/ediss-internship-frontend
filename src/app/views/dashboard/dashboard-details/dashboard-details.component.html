<div class="mb-3 d-flex justify-content-start align-items-center">
    <a (click)="navigateBack()" class="icon-back">
        <svg cIcon class="my-1 text-secondary" name="cilArrowCircleLeft" width="40"></svg>
    </a>
    <span class="text-secondary fs-3 ms-3">Dashboard Details</span>
</div>

<c-card class="mb-5 shadow">
    <!-- Header -->
    <c-card-header>
        <c-container>
            <c-row>
                <c-col class="ps-4" sm="10" xs="8">
                    <c-container>
                        <c-row class="mt-4">
                            <h4 class="header__title p-0 fw-bolder">Dashboard {{plant?.name}}</h4>
                        </c-row>
                        
                    </c-container>
                </c-col>
            </c-row>

        </c-container>
    </c-card-header>

    <!-- Card body -->
    <c-card-body>

        <!-- Card 1 -->
        <c-card class="mb-3 mt-2 pb-2">
            <c-card-body>
                <c-container>
                    <c-row class="mt-3 small-card__title">
                        <h6>Incidents by type</h6>
                    </c-row>
                    <c-row class="mt-3 small-card__text">
                        <c-chart    
                        [data]="chartsDataDonut?.data"
                        [height]="300"
                        [ngStyle]="{ 'marginTop.px': 40 }"
                        [options]="chartsDataDonut?.options"
                        [type]="chartsDataDonut?.type"
                        (chartRef)="handleChartRefDounut($event)" />
                    </c-row>
                </c-container>
            </c-card-body>
        </c-card>

         <!-- Card 2 -->
         <c-card class="mb-3 mt-2 pb-2">
            <c-card-body>
                <c-container>
                    <c-row class="mt-3 small-card__title">
                        <h6>Incidents Timeline</h6>
                    </c-row>
                    <c-row class="mt-3 small-card__text">
                        <c-chart
                        [data]="chartsData?.data"
                        [height]="300"
                        [ngStyle]="{ 'marginTop.px': 40 }"
                        [options]="chartsData?.options"
                        [type]="chartsData?.type"
                        (chartRef)="handleChartRef($event)"
                      >
                        Timeline chart
                      </c-chart>
                    </c-row>
                </c-container>
            </c-card-body>
        </c-card>

        <!-- Card 3 -->
        <c-card class="mb-3 pb-2" style="height: 400px;"> <!-- Fixed height for the card -->
            <c-card-body>
              <c-container>
                <c-row class="mt-3 small-card__title">
                  <h6>Incidents</h6>
                </c-row>
                <c-row>
                  <c-container>
                    <c-row class="mt-3 mb-2 small-card__subtitle">
                      <c-col class="d-flex justify-content-center align-items-center">Object</c-col>
                      <c-col class="d-flex justify-content-center align-items-center">Timestamp</c-col>
                      <c-col class="d-flex justify-content-center align-items-center">Detection instance</c-col>
                    </c-row>
                  </c-container>
                </c-row>
                <c-row class="pb-3">
                  <c-container style="height: 270px; overflow-y: auto;"> <!-- Fixed height and scrollable container -->
                    <c-row *ngFor="let incident of paginatedIncidents" class="align-items-center">
                      <c-col class="d-flex justify-content-center align-items-center">{{ incident.className }}</c-col>
                      <c-col class="d-flex justify-content-center align-items-center">{{ incident.timestamp }}</c-col>
                      <c-col class="d-flex justify-content-center align-items-center">{{ incident.detectionInstanceId }}</c-col>
                    </c-row>
                  </c-container>
                </c-row>
              </c-container>
            </c-card-body>
          </c-card>
          
    </c-card-body>
</c-card>